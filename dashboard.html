<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Customer 360 Analysis</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-chart-pie"></i>
                Customer 360
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="/" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link active">Dashboard</a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Dashboard Content -->
    <div class="dashboard">
        <div class="dashboard-sidebar">
            <h3>Analysis Tools</h3>
            <div class="sidebar-menu">
                <button class="sidebar-btn active" data-section="overview">
                    <i class="fas fa-tachometer-alt"></i> Overview
                </button>
                <button class="sidebar-btn" data-section="churn">
                    <i class="fas fa-user-slash"></i> Churn Prediction
                </button>
                <button class="sidebar-btn" data-section="cltv">
                    <i class="fas fa-dollar-sign"></i> CLTV Analysis
                </button>
                <button class="sidebar-btn" data-section="segmentation">
                    <i class="fas fa-layer-group"></i> Customer Segmentation
                </button>
                <button class="sidebar-btn" data-section="feedback">
                    <i class="fas fa-comments"></i> Feedback Analysis
                </button>
            </div>
        </div>

        <div class="dashboard-main">
            <!-- Overview Section -->
            <div id="overview" class="dashboard-section active">
                <h2>Customer Analytics Overview</h2>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="metric-content">
                            <h3>Total Customers</h3>
                            <p class="metric-value">10,247</p>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="metric-content">
                            <h3>Avg CLTV</h3>
                            <p class="metric-value">$1,256</p>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="metric-content">
                            <h3>Churn Rate</h3>
                            <p class="metric-value">12.5%</p>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="metric-content">
                            <h3>Satisfaction</h3>
                            <p class="metric-value">4.2/5</p>
                        </div>
                    </div>
                </div>
                
                <div class="charts-container">
                    <div class="chart-card">
                        <h3>Customer Distribution</h3>
                        <div id="churn-overview-chart"></div>
                    </div>
                    <div class="chart-card">
                        <h3>CLTV Distribution</h3>
                        <div id="cltv-overview-chart"></div>
                    </div>
                </div>
            </div>

            <!-- Churn Prediction Section -->
            <div id="churn" class="dashboard-section">
                <h2>Churn Prediction Analysis</h2>
                <div class="prediction-form">
                    <h3>Predict Customer Churn</h3>
                    <form id="churn-form">
                        <div class="form-group">
                            <label for="tenure">Customer Tenure (months):</label>
                            <input type="number" id="tenure" name="tenure" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="monthly_charges">Monthly Charges ($):</label>
                            <input type="number" id="monthly_charges" name="monthly_charges" min="0" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="total_charges">Total Charges ($):</label>
                            <input type="number" id="total_charges" name="total_charges" min="0" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="contract_length">Contract Length (months):</label>
                            <input type="number" id="contract_length" name="contract_length" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="payment_method">Payment Method (0-3):</label>
                            <input type="number" id="payment_method" name="payment_method" min="0" max="3" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Predict Churn</button>
                    </form>
                </div>
                <div id="churn-result" class="result-card" style="display: none;">
                    <h3>Churn Prediction Result</h3>
                    <div id="churn-prediction-content"></div>
                </div>
            </div>

            <!-- CLTV Analysis Section -->
            <div id="cltv" class="dashboard-section">
                <h2>Customer Lifetime Value Analysis</h2>
                <div class="prediction-form">
                    <h3>Calculate CLTV</h3>
                    <form id="cltv-form">
                        <div class="form-group">
                            <label for="cltv_tenure">Customer Tenure (months):</label>
                            <input type="number" id="cltv_tenure" name="tenure" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="cltv_monthly_charges">Monthly Charges ($):</label>
                            <input type="number" id="cltv_monthly_charges" name="monthly_charges" min="0" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="cltv_total_charges">Total Charges ($):</label>
                            <input type="number" id="cltv_total_charges" name="total_charges" min="0" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="avg_monthly_spend">Average Monthly Spend ($):</label>
                            <input type="number" id="avg_monthly_spend" name="avg_monthly_spend" min="0" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="frequency">Purchase Frequency (per month):</label>
                            <input type="number" id="frequency" name="frequency" min="0" step="0.1" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Calculate CLTV</button>
                    </form>
                </div>
                <div id="cltv-result" class="result-card" style="display: none;">
                    <h3>CLTV Prediction Result</h3>
                    <div id="cltv-prediction-content"></div>
                </div>
            </div>

            <!-- Customer Segmentation Section -->
            <div id="segmentation" class="dashboard-section">
                <h2>Customer Segmentation Analysis</h2>
                <div class="prediction-form">
                    <h3>Segment Customer</h3>
                    <form id="segment-form">
                        <div class="form-group">
                            <label for="recency">Recency (days since last purchase):</label>
                            <input type="number" id="recency" name="recency" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="seg_frequency">Frequency (purchases per month):</label>
                            <input type="number" id="seg_frequency" name="frequency" min="0" step="0.1" required>
                        </div>
                        <div class="form-group">
                            <label for="monetary">Monetary (average order value $):</label>
                            <input type="number" id="monetary" name="monetary" min="0" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="seg_tenure">Tenure (months):</label>
                            <input type="number" id="seg_tenure" name="tenure" min="0" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Segment Customer</button>
                    </form>
                </div>
                <div id="segment-result" class="result-card" style="display: none;">
                    <h3>Customer Segment Result</h3>
                    <div id="segment-prediction-content"></div>
                </div>
            </div>

            <!-- Feedback Analysis Section -->
            <div id="feedback" class="dashboard-section">
                <h2>Customer Feedback Analysis</h2>
                <div class="prediction-form">
                    <h3>Analyze Feedback</h3>
                    <form id="feedback-form">
                        <div class="form-group">
                            <label for="sentiment_score">Sentiment Score (-1 to 1):</label>
                            <input type="number" id="sentiment_score" name="sentiment_score" min="-1" max="1" step="0.1" required>
                        </div>
                        <div class="form-group">
                            <label for="rating">Customer Rating (1-5):</label>
                            <input type="number" id="rating" name="rating" min="1" max="5" required>
                        </div>
                        <div class="form-group">
                            <label for="response_time">Response Time (hours):</label>
                            <input type="number" id="response_time" name="response_time" min="0" step="0.1" required>
                        </div>
                        <div class="form-group">
                            <label for="resolution_time">Resolution Time (hours):</label>
                            <input type="number" id="resolution_time" name="resolution_time" min="0" step="0.1" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Analyze Feedback</button>
                    </form>
                </div>
                <div id="feedback-result" class="result-card" style="display: none;">
                    <h3>Feedback Analysis Result</h3>
                    <div id="feedback-prediction-content"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='dashboard.js') }}"></script>
</body>
</html>